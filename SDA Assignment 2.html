<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Home Assignment SDA: Part 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="SDA Assignment 2_files/libs/clipboard/clipboard.min.js"></script>
<script src="SDA Assignment 2_files/libs/quarto-html/quarto.js"></script>
<script src="SDA Assignment 2_files/libs/quarto-html/popper.min.js"></script>
<script src="SDA Assignment 2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="SDA Assignment 2_files/libs/quarto-html/anchor.min.js"></script>
<link href="SDA Assignment 2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SDA Assignment 2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="SDA Assignment 2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="SDA Assignment 2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="SDA Assignment 2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Home Assignment SDA: Part 2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="authors" class="level2">
<h2 class="anchored" data-anchor-id="authors">Authors</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 36%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th>Email</th>
<th>Personal number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Caroline Birkehammar</td>
<td>caroline.birkehammar@gmail.com</td>
<td>19971118-5562</td>
</tr>
<tr class="even">
<td style="text-align: left;">Steven Hiram Rubio Vasquez</td>
<td>stevenrv97@gmail.com</td>
<td>19970222-8793</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Pablo Paras Ochoa</td>
<td>pablo.paras.ochoa@gmail.com</td>
<td>19980810-0433</td>
</tr>
<tr class="even">
<td style="text-align: left;">Faezeh Karegar Hojatabadi</td>
<td>faezeh.karegar@gmail.com</td>
<td>19890903-1646</td>
</tr>
</tbody>
</table>
<section id="load-data" class="level4">
<h4 class="anchored" data-anchor-id="load-data">Load data</h4>
</section>
</section>
<section id="task-1" class="level1">
<h1>Task 1</h1>
<p><strong><em>Using a significance level of 1%, test the hypothesis that half of the housing units in the region have a balcony.</em></strong></p>
<section id="data-and-problem-description" class="level4">
<h4 class="anchored" data-anchor-id="data-and-problem-description">Data and problem description</h4>
<p>The observed proportion of balconies in our sample (<span class="math inline">\(\hat{p}\)</span>) is equal to <span class="math inline">\(0.55635\)</span>, but this is not enough to conclude whether or not half the housing units in the region have a balcony. What we want to know is actually how likely it is that we would observe <span class="math inline">\(\hat{p} = 0.55635\)</span> if the true value of <span class="math inline">\(p\)</span> is <span class="math inline">\(0.5\)</span>. More formally, we first assume that <span class="math inline">\(p = 0.5\)</span> (which we denote our null hypothesis <span class="math inline">\(H_{0}\)</span>) and estimate the likelihood of having observed <span class="math inline">\(\hat{p} = 0.55635\)</span> given that <span class="math inline">\(H_{0}\)</span> is true. A 1% significance level means that our test is designed so that, on average, we will incorrectly reject the null hypothesis 1% of the time. The null and alternative hypotheses are as follows: <span class="math display">\[H_{0}: p = 0.5 \qquad H_{A}: p \ne 0.5\]</span> We can assume that the distribution of <span class="math inline">\(\hat{p}\)</span> is approximately normal (since sample estimators for samples of sufficient size are normally distributed around the real value). For the distribution, we use mean 0.5 (<span class="math inline">\(H_{0}\)</span>) and standard deviation 0.019. Formally, the distribution is as follows: <span class="math display">\[ Since \quad n\hat{p}\hat{q} = 175.25 &gt; 5, \qquad \hat{p} \sim N\left(0.5, \sqrt{\frac{0.5 \cdot 0.5}{701}}\right) = N(0.5, 0.019) \]</span></p>
</section>
<section id="using-the-formula" class="level4">
<h4 class="anchored" data-anchor-id="using-the-formula">Using the formula</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.002847032</code></pre>
</div>
</div>
</section>
<section id="using-built-in-functions" class="level4">
<h4 class="anchored" data-anchor-id="using-built-in-functions">Using built-in functions</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>test_balcony <span class="ot">=</span> <span class="fu">prop.test</span>(n_balconies, <span class="at">n =</span> n, <span class="at">p =</span> <span class="fl">0.5</span>, <span class="at">alternative =</span> <span class="st">"two.sided"</span>, <span class="at">conf.level =</span> <span class="fl">0.99</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>test_balcony<span class="sc">$</span>p.value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.003218923</code></pre>
</div>
</div>
</section>
<section id="comparing-both-methods" class="level4">
<h4 class="anchored" data-anchor-id="comparing-both-methods">Comparing both methods</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p-value with R of: 0.00321892272071506"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p-value by hand of: 0.00284703196300162"</code></pre>
</div>
</div>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<p>Since the p-value is less than 0.01 in both cases, the observed proportion of balconies is very unlikely under the null hypothesis, even on the 99% significance level. Therefore, we reject the null hypothesis that <span class="math inline">\(p = 0.5\)</span>. However, it must be remarked that the proportion of balconies, while not exactly half, is still likely to somewhat above one half (though a one sided hypothesis test would be necesary to confirm that).</p>
</section>
</section>
<section id="task-2" class="level1">
<h1>Task 2</h1>
<p><strong><em>Using a significance level of 5%, test the hypothesis that the expected size of the housing units in the region is 75m2.</em></strong></p>
<section id="data-and-problem-description-1" class="level4">
<h4 class="anchored" data-anchor-id="data-and-problem-description-1">Data and problem description</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The distribution of <span class="math inline">\(x\)</span> as shown by the histogram is right tailed and not normally distributed. However, because the sample size is greater than 30 we can approximate the distribution of <span class="math inline">\(\bar{X}\)</span> with a normal distribution using the central limit theorem.</p>
<p>The observed mean of the area in our sample (that is to say, the estimate) is equal to <span class="math inline">\(79.2 m^2\)</span> As in the previous problem, we can determine whether it is likely that the actual value is <span class="math inline">\(75 m^2\)</span> by estimating the likelihood that we would observe <span class="math inline">\(\bar{x} = 79.2 m^2\)</span> if <span class="math inline">\(\bar{X} = 75 m^2\)</span>.</p>
<p>Therefore, our null and alternative hypotheses are as follows: <span class="math display">\[H_{0}: \mu = 0.75 \qquad H_{A}: \mu \ne 0.75\]</span></p>
</section>
<section id="using-the-formula-1" class="level4">
<h4 class="anchored" data-anchor-id="using-the-formula-1">Using the formula</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.004895551</code></pre>
</div>
</div>
</section>
<section id="using-built-in-functions-1" class="level4">
<h4 class="anchored" data-anchor-id="using-built-in-functions-1">Using built-in functions</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.004656418</code></pre>
</div>
</div>
</section>
<section id="comparing-both-metods" class="level4">
<h4 class="anchored" data-anchor-id="comparing-both-metods">Comparing both metods</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p-value with R of: 0.005"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p-value by hand of: 0.005"</code></pre>
</div>
</div>
</section>
<section id="conclusion-1" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-1">Conclusion</h4>
<p>The p-value is either <span class="math inline">\(0.0046\)</span> or <span class="math inline">\(0.0049\)</span> depending on the method. Because the pre-established level of significance is 0.05 we can reject the null hypothesis. Our interpretation therefore, is that the mean (or expected) area of the housing units is not 75 square meters as it is highly unlikely we would have observed a value of <span class="math inline">\(\bar{x} = 79.2 m^2\)</span> if the actual value were <span class="math inline">\(\bar{X} = 75 m^2\)</span>.</p>
</section>
</section>
<section id="task-3" class="level1">
<h1>Task 3</h1>
<p><strong><em>Estimate the proportion of apartments in the region through a 90% confidence interval.</em></strong></p>
<section id="data-and-problem-description-2" class="level4">
<h4 class="anchored" data-anchor-id="data-and-problem-description-2">Data and problem description</h4>
<p>Our sample’s estimate for the proportion of apartments was <span class="math inline">\(0.792\)</span>, but it is very unlikely that we have obtained exactly the same proportion of apartments in the sample as in the population. Therefore, we want to produce a confidence interval which we can be fairly sure includes the value in the population. More formally the 90% confidence interval for a proportion indicates that on average, the interval would contain the true value in 9 out of 10 samples. It can be expressed as follows: <span class="math display">\[ \hat{p} \pm z_{0.05} \sqrt{\frac{\hat{p}(1 - \hat{p})}{n}} \]</span></p>
</section>
<section id="using-the-formula-2" class="level4">
<h4 class="anchored" data-anchor-id="using-the-formula-2">Using the formula</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8169535</code></pre>
</div>
</div>
</section>
<section id="using-the-built-in-functions" class="level4">
<h4 class="anchored" data-anchor-id="using-the-built-in-functions">Using the built-in functions</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7646586 0.8164872
attr(,"conf.level")
[1] 0.9</code></pre>
</div>
</div>
</section>
<section id="comparing-both-methods-1" class="level4">
<h4 class="anchored" data-anchor-id="comparing-both-methods-1">Comparing both methods</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C.I. proportion of apartments with R: [0.765, 0.816]"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C.I. proportion of apartments by hand:[ 0.766, 0.817]"</code></pre>
</div>
</div>
</section>
<section id="conclusion-2" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-2">Conclusion</h4>
<p>The 90% confidence interval for the proportion of housing units that are apartments is about 0.76 to 0.82. This means that if we repeated this process with different samples an infinite number of times, 90% of calculated intervals would contain the real value.</p>
</section>
</section>
<section id="task-4" class="level1">
<h1>Task 4</h1>
<p><strong><em>Estimate the expected number of rooms of the housing units in the region through a 95% confidence interval.</em></strong></p>
<section id="data-and-problem-description-3" class="level4">
<h4 class="anchored" data-anchor-id="data-and-problem-description-3">Data and problem description</h4>
<p>This problem is very similar to the previous one. In this case, we want to create an interval that, if we obtained an infinite number of samples, would contain the actual value for the population 95% of the time. Additionally, since the variance is unknown, the distribution of the expected number of rooms will follow a t-distribution. Formally, the 95% confidence interval is defined as:</p>
<p><span class="math display">\[ \bar{x} \pm t_{0.025, n-1} \frac{s_x}{\sqrt{n}} \]</span></p>
</section>
<section id="using-the-formulas" class="level4">
<h4 class="anchored" data-anchor-id="using-the-formulas">Using the formulas</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.033163 3.269262</code></pre>
</div>
</div>
</section>
<section id="using-the-built-in-functions-1" class="level4">
<h4 class="anchored" data-anchor-id="using-the-built-in-functions-1">Using the built-in functions</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.033163 3.269262
attr(,"conf.level")
[1] 0.95</code></pre>
</div>
</div>
</section>
<section id="conclusion-3" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-3">Conclusion</h4>
<p>The confidence interval for the mean (expected) number of rooms in the region is [3.033163, 3.269262]. This means we can be fairly confident that the actual average number of rooms for housing regions is slightly above 3. It is important to note that even though a given unit of housing must have a discrete number of rooms, the expected number of rooms is not discrete.</p>
</section>
</section>
<section id="task-5" class="level1">
<h1>Task 5</h1>
<p><strong><em>Fit a linear regression that explains STARTING_PRICE in terms of some or all of the remaining variables (REGION, TYPE, BALCONY, ROOMS and AREA). (Tips: i. Take into account that the regression is fitted with predictive purposes; ii. Make use of appropriate numerical and graphical tools; iii. Make sure that you report the estimated regression in equation form; iv. Consider transformations and interactions between variables; v. Check the model assumptions; vi. Use appropriate criteria to decide which variables should be included in the model.)</em></strong></p>
<section id="data-exploration-and-transformation" class="level4">
<h4 class="anchored" data-anchor-id="data-exploration-and-transformation">Data exploration and transformation</h4>
<p>Linear regressions enable us to make predictions for a variable given a different set of variables. In this case, we can predict the Starting Price of the housing units as a function of Region, Type, Balcony, Rooms and Area as well as interactions and transformations among them. While this is very powerful, linear regression models make several assumptions that must be met if we want to use it. First, that the relationship between the independent variables and the dependent variable is linear. Second, that the error terms are independent. Third, that the error terms have a constant standard deviation. Fourth and finally, that the error terms are normaly distributed. While the latter three assumptions can only be checked after fitting the model (as they primarily relate to the error terms or the differences between the predicted and real values), the first can be checked ex-ante. Therefore, before creating and comparing different multiple regression models, we must first check that our data fits with the linearity assumption, and conduct appropriate transformations as needed.</p>
<p>We can do this rapidly by visualizing our data, efficiently checking the relationship between our variables as well as evaluating if any transformation may be necessary. We begin with the relationship between Rooms and Starting Price.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The first graph shows an approximately linear relationship between Rooms and Starting Price, and there is no clear improvement by transforming. As such, we considered it unnecessary to use any transformation.</p>
<p>We follow this by checking the linearity assumption between Starting Price and Area.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>While the plot without any transformations shows a fairly linear relationship between the starting price and area of housing units, it also displays more heteroskedasticity for larger housing units. Taking the log of both starting price and area renders a linear and homoskedastic plot, and could be a good option for further analysis and model creation.</p>
<p>We did not repeat this procedure for Balcony, Type and Region as these variables are categorical and non-ordinal.</p>
</section>
<section id="fit-multiple-regression-model" class="level4">
<h4 class="anchored" data-anchor-id="fit-multiple-regression-model">Fit multiple regression model</h4>
<p>We create two multiple regression models: one without any log transformations, and one using the log of the starting price and the area. We start by including all interactions between the covariates, and use stepwise backwards selection to remove abundant interactions and variables.</p>
<p>Here is the model without transformations:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = STARTING_PRICE ~ REGION + TYPE + AREA, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.8886 -1.2049 -0.0976  0.8793 10.2498 

Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     -0.45938    0.28402  -1.617    0.106    
REGIONNorthwest  0.17195    0.30746   0.559    0.576    
REGIONSoutheast -1.22690    0.30834  -3.979 7.65e-05 ***
REGIONStockholm  1.57958    0.22773   6.936 9.25e-12 ***
REGIONWest      -1.64916    0.29469  -5.596 3.16e-08 ***
TYPETerrace     -1.52942    0.34653  -4.414 1.18e-05 ***
TYPEVilla        0.12590    0.31799   0.396    0.692    
AREA             0.05783    0.00280  20.652  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.039 on 693 degrees of freedom
Multiple R-squared:  0.5489,    Adjusted R-squared:  0.5443 
F-statistic: 120.5 on 7 and 693 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = STARTING_PRICE ~ REGION + TYPE + BALCONY + ROOMS + 
    AREA + REGION:TYPE + REGION:AREA + TYPE:ROOMS + TYPE:AREA, 
    data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.9773 -1.0625  0.0256  0.9168  9.3701 

Coefficients:
                             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                 -1.420897   0.554455  -2.563  0.01060 *  
REGIONNorthwest              2.458956   0.947598   2.595  0.00967 ** 
REGIONSoutheast              1.245424   0.931261   1.337  0.18156    
REGIONStockholm              1.706318   0.584951   2.917  0.00365 ** 
REGIONWest                   0.774388   0.706154   1.097  0.27320    
TYPETerrace                  2.616140   2.663368   0.982  0.32632    
TYPEVilla                    1.519649   1.075489   1.413  0.15812    
BALCONYYes                  -0.291673   0.173814  -1.678  0.09380 .  
ROOMS                       -0.596187   0.181092  -3.292  0.00105 ** 
AREA                         0.091316   0.010144   9.002  &lt; 2e-16 ***
REGIONNorthwest:TYPETerrace  0.904760   1.289551   0.702  0.48317    
REGIONSoutheast:TYPETerrace  1.412709   1.160399   1.217  0.22386    
REGIONStockholm:TYPETerrace -2.849867   0.965599  -2.951  0.00327 ** 
REGIONWest:TYPETerrace       0.791002   1.041856   0.759  0.44798    
REGIONNorthwest:TYPEVilla    0.099325   1.459590   0.068  0.94577    
REGIONSoutheast:TYPEVilla    0.882339   1.023590   0.862  0.38899    
REGIONStockholm:TYPEVilla   -2.885108   0.879207  -3.281  0.00109 ** 
REGIONWest:TYPEVilla        -0.709722   0.929726  -0.763  0.44551    
REGIONNorthwest:AREA        -0.026664   0.012845  -2.076  0.03828 *  
REGIONSoutheast:AREA        -0.028886   0.011539  -2.503  0.01254 *  
REGIONStockholm:AREA         0.008226   0.007718   1.066  0.28693    
REGIONWest:AREA             -0.025975   0.009202  -2.823  0.00490 ** 
TYPETerrace:ROOMS            0.754882   0.541815   1.393  0.16400    
TYPEVilla:ROOMS              1.139744   0.271156   4.203 2.98e-05 ***
TYPETerrace:AREA            -0.065207   0.025638  -2.543  0.01120 *  
TYPEVilla:AREA              -0.051528   0.010899  -4.728 2.76e-06 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.905 on 675 degrees of freedom
Multiple R-squared:  0.6162,    Adjusted R-squared:  0.602 
F-statistic: 43.35 on 25 and 675 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>And here is the model using the logs of Starting Price and Area:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(STARTING_PRICE) ~ REGION + TYPE + BALCONY + 
    ROOMS + log(AREA) + REGION:TYPE + REGION:ROOMS + REGION:log(AREA), 
    data = data)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.24107 -0.22755  0.01344  0.24861  0.93169 

Coefficients:
                            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                 -1.93813    0.49592  -3.908 0.000102 ***
REGIONNorthwest              1.17211    0.92282   1.270 0.204469    
REGIONSoutheast              3.00270    1.17878   2.547 0.011077 *  
REGIONStockholm             -0.14326    0.57441  -0.249 0.803130    
REGIONWest                   0.92313    0.76985   1.199 0.230904    
TYPETerrace                 -0.07885    0.14215  -0.555 0.579300    
TYPEVilla                    0.26554    0.11937   2.225 0.026442 *  
BALCONYYes                  -0.05732    0.03250  -1.764 0.078205 .  
ROOMS                        0.06146    0.04105   1.497 0.134811    
log(AREA)                    0.68630    0.13741   4.994 7.52e-07 ***
REGIONNorthwest:TYPETerrace  0.01432    0.22550   0.064 0.949375    
REGIONSoutheast:TYPETerrace  0.33760    0.21309   1.584 0.113588    
REGIONStockholm:TYPETerrace -0.42219    0.18033  -2.341 0.019514 *  
REGIONWest:TYPETerrace       0.19281    0.19277   1.000 0.317561    
REGIONNorthwest:TYPEVilla   -0.26594    0.29074  -0.915 0.360681    
REGIONSoutheast:TYPEVilla    0.25901    0.18128   1.429 0.153520    
REGIONStockholm:TYPEVilla   -0.31517    0.16432  -1.918 0.055524 .  
REGIONWest:TYPEVilla        -0.07374    0.18372  -0.401 0.688268    
REGIONNorthwest:ROOMS        0.05568    0.08797   0.633 0.526982    
REGIONSoutheast:ROOMS        0.18811    0.08790   2.140 0.032721 *  
REGIONStockholm:ROOMS       -0.06310    0.05448  -1.158 0.247194    
REGIONWest:ROOMS             0.10311    0.07016   1.470 0.142118    
REGIONNorthwest:log(AREA)   -0.26979    0.26370  -1.023 0.306634    
REGIONSoutheast:log(AREA)   -0.90153    0.32327  -2.789 0.005439 ** 
REGIONStockholm:log(AREA)    0.18733    0.16389   1.143 0.253418    
REGIONWest:log(AREA)        -0.38626    0.21601  -1.788 0.074199 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.3526 on 675 degrees of freedom
Multiple R-squared:  0.6403,    Adjusted R-squared:  0.627 
F-statistic: 48.06 on 25 and 675 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-22-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-22-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="conclusion-4" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-4">Conclusion</h4>
<p>The adjusted R-squared is greater for the model using logs.</p>
</section>
</section>
<section id="task-6" class="level1">
<h1>Task 6</h1>
<p><strong><em>The dataset test.xlsx that can be found in Athena (Resources/Part 1/Assignment) contains information on the region, the type of housing unit, the presence of a balcony, the number of rooms and the area of ten housing units. Use your regression model from exercise 5 to predict the starting price of these housing units (Provide a point prediction, ˆy, and an interval prediction.)</em></strong></p>
<section id="point-prediction" class="level4">
<h4 class="anchored" data-anchor-id="point-prediction">Point prediction</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="SDA-Assignment-2_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interval-prediction" class="level4">
<h4 class="anchored" data-anchor-id="interval-prediction">Interval prediction</h4>
</section>
<section id="conclusion-5" class="level4">
<h4 class="anchored" data-anchor-id="conclusion-5">Conclusion</h4>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>